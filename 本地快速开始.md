# ⚡ 本地快速开始（3步完成）

## 🎯 超快速启动

如果您想立即在本地测试系统，只需运行：

```bash
# Windows 用户
local-setup.bat

# 完成后启动服务
start-dev.bat
```

就这么简单！🎉

---

## 📝 详细步骤

### 步骤 1：初始化环境（首次运行）

**Windows 用户：**
```cmd
双击运行 local-setup.bat
```

**Mac/Linux 用户：**
```bash
chmod +x local-setup.sh
./local-setup.sh
```

这个脚本会自动：
- ✅ 安装前端和后端依赖
- ✅ 创建环境变量文件
- ✅ 初始化本地数据库
- ✅ 创建测试数据（可选）

**预计时间：2-3 分钟**

---

### 步骤 2：启动开发服务

#### 方法 A：使用启动脚本（推荐）

**Windows 用户：**
```cmd
双击运行 start-dev.bat
```

这会自动：
- 启动 Workers（后端 API）
- 启动前端开发服务器
- 自动打开浏览器

#### 方法 B：手动启动

**终端 1 - 启动 Workers：**
```bash
cd workers
npm run dev
```

**终端 2 - 启动前端：**
```bash
cd frontend
npm run dev
```

---

### 步骤 3：开始测试

浏览器会自动打开 http://localhost:5173

🎉 **开始使用吧！**

---

## 🧪 测试功能

### 1. 创建临时邮箱
- 点击 "✨ 生成邮箱" 按钮
- 查看生成的邮箱地址（类似：`temp_abc123@test.local`）
- 地址会自动复制到剪贴板

### 2. 查看邮箱列表
- 创建多个临时邮箱
- 在列表中查看所有邮箱
- 点击邮箱查看详情

### 3. 查看邮件（如果创建了测试数据）
- 选择一个邮箱
- 在"收件箱"中查看邮件
- 点击邮件查看详情
- 验证码会自动提取并高亮显示

### 4. 测试删除功能
- 单个删除：点击邮箱右侧的 "×" 按钮
- 批量删除：点击 "🗑️ 全部删除" 按钮

---

## 📊 本地环境说明

### ✅ 可用功能

在本地环境下，以下功能可以正常使用：

- ✅ **前端界面** - 完整的 UI 展示
- ✅ **邮箱管理** - 创建、删除、列表
- ✅ **数据库操作** - 所有 CRUD 操作
- ✅ **状态管理** - Pinia store 功能
- ✅ **邮件显示** - 查看模拟邮件
- ✅ **验证码提取** - 测试验证码识别

### ⚠️ 受限功能

以下功能需要部署到 Cloudflare 才能完整使用：

- ⚠️ **Cloudflare Email Routing** - 本地会跳过 API 调用
- ⚠️ **真实邮件接收** - 需要 Email Worker 部署
- ⚠️ **WebSocket 推送** - 本地可能不稳定

**不用担心！** 这些限制不影响本地开发和测试。

---

## 🔍 验证安装

### 检查服务状态

**Workers API：**
```bash
# 在浏览器或命令行访问
curl http://localhost:8787/api/config
# 应该返回 JSON 响应
```

**前端：**
```
访问 http://localhost:5173
应该看到完整的界面
```

### 检查数据库

```bash
cd workers

# 查看所有邮箱
npx wrangler d1 execute tempemail --local --command="SELECT * FROM temp_emails"

# 查看所有邮件
npx wrangler d1 execute tempemail --local --command="SELECT * FROM messages"
```

---

## 🐛 遇到问题？

### 常见问题快速修复

#### 1. 端口被占用

**错误**：`Port 8787 is already in use`

**解决**：
```bash
# Windows
netstat -ano | findstr :8787
# 找到 PID，然后：
taskkill /F /PID [PID号]

# 或者修改端口
# 编辑 workers/wrangler.toml
```

#### 2. 依赖安装失败

**解决**：
```bash
# 清除缓存重新安装
cd frontend
rm -rf node_modules package-lock.json
npm install

cd ../workers
rm -rf node_modules package-lock.json
npm install
```

#### 3. 数据库错误

**解决**：
```bash
cd workers
# 重新初始化数据库
npx wrangler d1 execute tempemail --local --file=schema.sql
```

#### 4. 前端白屏

**检查**：
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签的错误信息
3. 检查 Network 标签，确认 API 请求正常

**解决**：
- 确认 Workers 正在运行
- 检查 `frontend/.env` 配置是否正确

---

## 💡 开发技巧

### 1. 热重载

- **前端**：修改代码自动刷新浏览器
- **Workers**：需要手动重启（Ctrl+C 然后重新运行）

### 2. 查看日志

- **Workers 日志**：在 Workers 终端窗口
- **前端日志**：浏览器开发者工具 Console
- **Network**：查看所有 API 请求和响应

### 3. 调试数据库

```bash
cd workers

# 查看所有表
npx wrangler d1 execute tempemail --local --command="SELECT name FROM sqlite_master WHERE type='table'"

# 统计数据
npx wrangler d1 execute tempemail --local --command="
SELECT 
  (SELECT COUNT(*) FROM temp_emails) as emails,
  (SELECT COUNT(*) FROM messages) as messages
"
```

### 4. 清空数据

```bash
# 清空所有邮箱和邮件
npx wrangler d1 execute tempemail --local --command="
DELETE FROM messages;
DELETE FROM temp_emails;
"
```

---

## 📚 更多文档

- 📖 [本地测试指南.md](./本地测试指南.md) - 详细的测试说明
- 🚀 [快速开始.md](./快速开始.md) - 生产部署指南
- 🔧 [环境配置向导.md](./环境配置向导.md) - 配置详解
- 📊 [项目总结.md](./项目总结.md) - 完整功能清单

---

## 🎯 下一步

本地测试满意后：

### 1. 准备生产环境
- 获取 Cloudflare API Token
- 配置 Email Routing
- 准备域名

### 2. 部署到 Cloudflare
```bash
./deploy.sh
```

### 3. 测试真实邮件
- 生成临时邮箱
- 发送测试邮件
- 验证接收和验证码提取

---

## ✨ 快速命令参考

```bash
# 初始化环境（首次）
local-setup.bat   # Windows
./local-setup.sh  # Mac/Linux

# 启动开发服务
start-dev.bat     # Windows（自动启动前后端）

# 或手动启动
cd workers && npm run dev      # 终端 1
cd frontend && npm run dev     # 终端 2

# 查看数据库
cd workers
npx wrangler d1 execute tempemail --local --command="SELECT * FROM temp_emails"

# 测试 API
curl http://localhost:8787/api/config
```

---

**准备好了吗？运行 `local-setup.bat` 开始吧！** 🚀

